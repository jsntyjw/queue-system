{"ast":null,"code":"var _jsxFileName = \"/Users/jeffrey/Documents/GitHub/queue-system/frontend/src/components/ServiceCounter.tsx\";\nimport React from 'react';\nimport '../App.css';\nimport { Text, Button, Layout, Breadcrumb, BoxContainer, InputSelect } from 'react-lifesg-design-system';\nimport styled from \"styled-components\";\nconst StyledSection = styled(Layout.Section)`\n    margin-top: 8%;\n    min-height: 600px;\n`;\n\nclass ServiceCounter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      _bookingId: \"\",\n      nric: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      inputValue: \"\"\n    };\n    this.consumeQueue = this.consumeQueue.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(StyledSection, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Layout.Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Breadcrumb, {\n      links: [{\n        title: 'Home',\n        url: 'http://localhost:3000/ServiceCounter'\n      }, {\n        title: 'Service Counter'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"divButtonNextPatient\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button.Default, {\n      className: \"buttonsuccess\",\n      onClick: () => this.consumeQueue(this.handle200, \"nextPatient\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 25\n      }\n    }, \"Next Patient\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"divCurrentCitizen\",\n      style: {\n        display: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Text.H3, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 33\n      }\n    }, \"Currently Serving\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(BoxContainer, {\n      title: \"Citizen Information\",\n      collapsible: false,\n      className: \"textleft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2rem\",\n        minWidth: \"1080px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 45\n      }\n    }, \"NRIC\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 45\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 45\n      }\n    }, \"Phone Number\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 45\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 45\n      }\n    }, this.state.nric), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 45\n      }\n    }, this.state.name), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 45\n      }\n    }, this.state.phone), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 45\n      }\n    }, this.state.email)))), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, \"Next service: \"))), /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(InputSelect, {\n      placeholder: \"Select\",\n      options: [{\n        value: \"paymentQueue\",\n        label: \"Payment\"\n      }, {\n        value: \"medicationQueue\",\n        label: \"Medication\"\n      }],\n      valueExtractor: item => item.value,\n      listExtractor: item => item.label,\n      displayValueExtractor: item => item.label,\n      onSelectItem: (item, selectedValue) => {\n        this.setState({\n          inputValue: selectedValue\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button.Default, {\n      onClick: () => this.consumeQueue(this.handle200, \"sendToNextService\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }, \"Send to next service\"))));\n  }\n\n  handle200(response) {\n    console.log('handle200 has received:', response);\n  }\n\n  consumeQueue(callback, buttonSelected, bookingId, nric, citizenName, citizenEmail, citizenNumber) {\n    var respectiveURL = \"\";\n\n    if (buttonSelected == \"nextPatient\") {\n      document.getElementById(\"divCurrentCitizen\").style.display = \"block\";\n      document.getElementById(\"divButtonNextPatient\").style.display = \"none\";\n      respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue;\n    } else {\n      const queueObject = {\n        \"_id\": this,\n        \"nric\": nric,\n        \"citizenName\": citizenName,\n        \"citizenEmail\": citizenEmail,\n        \"citizenNumber\": citizenNumber\n      };\n      var myJSON = encodeURI(JSON.stringify(queueObject));\n      document.getElementById(\"divCurrentCitizen\").style.display = \"none\";\n      document.getElementById(\"divButtonNextPatient\").style.display = \"block\";\n      respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/sender?bookingID=booking001&exchangeID=hospital&bindingKey=doctor&bookingDetails=\" + myJSON;\n      respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue;\n      console.log(respectiveURL + \"--------------\");\n    }\n\n    const xhr = new XMLHttpRequest(),\n          method = \"GET\",\n          url = respectiveURL; // initialize a new GET request\n\n    xhr.open(method, url, true); // respond to every readyState change\n\n    xhr.onreadystatechange = () => {\n      // ignore all readyStates other than \"DONE\"\n      if (xhr.readyState !== XMLHttpRequest.DONE) {\n        return;\n      } // call the callback with status\n\n\n      if (xhr.status === 200) {\n        this.setState({\n          nric: JSON.parse(xhr.responseText).nric,\n          name: JSON.parse(xhr.responseText).citizenName,\n          phone: JSON.parse(xhr.responseText).citizenNumber,\n          email: JSON.parse(xhr.responseText).citizenEmail\n        });\n        console.log(JSON.parse(xhr.responseText).nric);\n        return callback(xhr.status);\n      } // got something other than 200,\n      // re-initialize and send another GET request\n\n\n      xhr.open(method, url, true);\n      xhr.send();\n    }; // send the initial GET request\n\n\n    xhr.send();\n  }\n\n}\n\nexport default ServiceCounter; // function foundResult(_id: any, nric: any, phone: any, email: any, name: any)  {\n//      queueObject = {\n//         \"_id\" :_id,\n//         \"nric\":nric,\n//         \"citizenName\":name,\n//         \"citizenEmail\":email,\n//         \"citizenNumber\":phone\n//     }\n//     console.log(queueObject)\n// }","map":{"version":3,"sources":["/Users/jeffrey/Documents/GitHub/queue-system/frontend/src/components/ServiceCounter.tsx"],"names":["React","Text","Button","Layout","Breadcrumb","BoxContainer","InputSelect","styled","StyledSection","Section","ServiceCounter","Component","constructor","props","state","_bookingId","nric","name","phone","email","inputValue","consumeQueue","bind","render","title","url","handle200","display","padding","minWidth","value","label","item","selectedValue","setState","response","console","log","callback","buttonSelected","bookingId","citizenName","citizenEmail","citizenNumber","respectiveURL","document","getElementById","style","queueObject","myJSON","encodeURI","JSON","stringify","xhr","XMLHttpRequest","method","open","onreadystatechange","readyState","DONE","status","parse","responseText","send"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../App.css';\nimport {\n    Text,\n    Button,\n    Layout,\n    Breadcrumb,\n    BoxContainer,\n    InputSelect\n} from 'react-lifesg-design-system';\nimport styled from \"styled-components\";\n\ninterface Props {\n    onChange: (fieldName: string, value: string) => void;\n    onSave: () => void;\n}\n\nconst StyledSection = styled(Layout.Section)`\n    margin-top: 8%;\n    min-height: 600px;\n`;\n\ninterface MyState {\n    _bookingId : string,\n    nric: string,\n    name: string,\n    phone: string,\n    email: string,\n    inputValue : string\n}\n\n\n\nclass ServiceCounter extends React.Component<{}, MyState> {\n    constructor(props) {\n        super(props);\n        this.state = {\n            _bookingId: \"\",\n            nric: \"\",\n            name: \"\",\n            phone: \"\",\n            email: \"\",\n            inputValue: \"\"\n        };\n\n        this.consumeQueue = this.consumeQueue.bind(this)\n\n    }\n\n    render() {\n        return (\n            <StyledSection>\n                <Layout.Container>\n                    <Breadcrumb links={[{ title: 'Home', url: 'http://localhost:3000/ServiceCounter' }, { title: 'Service Counter' }]} />\n\n                    <div id='divButtonNextPatient'>\n\n\n                        <Button.Default className='buttonsuccess'\n                            onClick={() => this.consumeQueue(this.handle200, \"nextPatient\")}\n                        >Next Patient</Button.Default>\n\n                    </div>\n                    <div id='divCurrentCitizen' style={{ display: 'none' }}>\n\n                        <Layout.GridContainer className=\"column2\">\n                            <div>\n\n\n\n\n                                <div className='spacer1'></div>\n\n                                <Text.H3>Currently Serving</Text.H3>\n                                <div className='spacer1'></div>\n                                <div className='spacer1'></div>\n\n\n                                <BoxContainer title=\"Citizen Information\" collapsible={false} className=\"textleft\" >\n                                    <div style={{ padding: \"2rem\", minWidth: \"1080px\" }}>\n                                        <Layout.GridContainer className=\"column4\">\n                                            <Text.Body weight=\"semibold\">NRIC</Text.Body>\n                                            <Text.Body weight=\"semibold\">Name</Text.Body>\n                                            <Text.Body weight=\"semibold\">Phone Number</Text.Body>\n                                            <Text.Body weight=\"semibold\">Email</Text.Body>\n                                            <Text.Body>{this.state.nric}</Text.Body>\n                                            <Text.Body>{this.state.name}</Text.Body>\n                                            <Text.Body>{this.state.phone}</Text.Body>\n                                            <Text.Body>{this.state.email}</Text.Body>\n                                        </Layout.GridContainer>\n                                    </div>\n                                </BoxContainer>\n\n\n                                <Text.Body>Next service: </Text.Body>\n\n\n                            </div>\n\n                        </Layout.GridContainer>\n\n\n                        <Layout.GridContainer className=\"column4\">\n\n                            <InputSelect\n                                placeholder=\"Select\"\n                                options={[\n                                    { value: \"paymentQueue\", label: \"Payment\" },\n                                    { value: \"medicationQueue\", label: \"Medication\" }\n                                ]}\n                                valueExtractor={(item) => item.value}\n                                listExtractor={(item) => item.label}\n                                displayValueExtractor={(item) => item.label}\n                                onSelectItem={(item, selectedValue) => {\n\n                                    this.setState({\n                                        inputValue : selectedValue\n                                    })\n                                }} \n                            />\n                        </Layout.GridContainer>\n\n\n                        <div className='spacer1'></div>\n\n\n                        <Button.Default\n                            onClick={() => this.consumeQueue(this.handle200, \"sendToNextService\")}\n                            \n                        >Send to next service</Button.Default>\n\n                    </div>\n\n                </Layout.Container>\n            </StyledSection>\n        )\n    }\n\n\n     handle200(response) {\n        console.log('handle200 has received:', response);\n    }\n\n    \n    \n     consumeQueue(callback, buttonSelected: string, bookingId?: string, nric?: string, citizenName?: string, citizenEmail?: string, citizenNumber?: string) {\n    \n        var respectiveURL = \"\"\n        if (buttonSelected == \"nextPatient\") {\n            document.getElementById(\"divCurrentCitizen\")!!.style.display = \"block\";\n            document.getElementById(\"divButtonNextPatient\")!!.style.display = \"none\";\n            respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue\n\n        }\n        else {\n    \n            const queueObject = {\n                \"_id\": this,\n                \"nric\": nric,\n                \"citizenName\": citizenName,\n                \"citizenEmail\": citizenEmail,\n                \"citizenNumber\": citizenNumber\n            }\n    \n            var myJSON = encodeURI(JSON.stringify(queueObject));\n            document.getElementById(\"divCurrentCitizen\")!!.style.display = \"none\";\n            document.getElementById(\"divButtonNextPatient\")!!.style.display = \"block\";\n            respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/sender?bookingID=booking001&exchangeID=hospital&bindingKey=doctor&bookingDetails=\" + myJSON;\n            respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue\n            console.log(respectiveURL + \"--------------\")\n        }\n    \n    \n    \n        const xhr = new XMLHttpRequest(),\n            method = \"GET\",\n            url = respectiveURL;\n        // initialize a new GET request\n        xhr.open(method, url, true);\n    \n        // respond to every readyState change\n        xhr.onreadystatechange = () => {\n    \n            // ignore all readyStates other than \"DONE\"\n            if (xhr.readyState !== XMLHttpRequest.DONE) { return; }\n    \n            // call the callback with status\n            if (xhr.status === 200) {\n                this.setState({\n                    nric:  JSON.parse(xhr.responseText).nric,\n                    name: JSON.parse(xhr.responseText).citizenName,\n                    phone: JSON.parse(xhr.responseText).citizenNumber,\n                    email: JSON.parse(xhr.responseText).citizenEmail\n                })\n\n                console.log(JSON.parse(xhr.responseText).nric);\n                \n                return callback(xhr.status);\n            }\n    \n            // got something other than 200,\n            // re-initialize and send another GET request\n            xhr.open(method, url, true);\n            xhr.send();\n        }\n    \n        // send the initial GET request\n        xhr.send();\n    } \n\n\n}\n\nexport default ServiceCounter;\n\n\n\n\n\n\n\n\n\n// function foundResult(_id: any, nric: any, phone: any, email: any, name: any)  {\n//      queueObject = {\n//         \"_id\" :_id,\n//         \"nric\":nric,\n//         \"citizenName\":name,\n//         \"citizenEmail\":email,\n//         \"citizenNumber\":phone\n//     }\n\n//     console.log(queueObject)\n// }\n\n"]},"metadata":{},"sourceType":"module"}