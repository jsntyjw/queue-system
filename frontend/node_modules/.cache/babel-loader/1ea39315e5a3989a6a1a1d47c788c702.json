{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\junjie\\\\Documents\\\\GitHub\\\\queue-system\\\\frontend\\\\src\\\\components\\\\ServiceCounter.tsx\";\nimport React from 'react';\nimport '../App.css';\nimport { Text, Button, Layout, Breadcrumb, BoxContainer, InputSelect, Modal } from 'react-lifesg-design-system';\nimport styled from \"styled-components\";\nimport { ModalContent } from \"../models/doc-elements\";\nconst StyledSection = styled(Layout.Section)`\n    margin-top: 8%;\n    min-height: 600px;\n`;\n\nclass ServiceCounter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      _bookingId: \"\",\n      nric: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      inputValue: \"\",\n      showModal: false\n    };\n    this.consumeQueue = this.consumeQueue.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(StyledSection, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Base, {\n      show: this.state.showModal,\n      animationFrom: \"bottom\",\n      enableOverlayClick: true // onOverlayClick={closeModal()}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Box, {\n      onClose: () => {\n        this.setState({\n          showModal: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ModalContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 33\n      }\n    }, \"Send to queue succesfully\")))), /*#__PURE__*/React.createElement(Layout.Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Breadcrumb, {\n      links: [{\n        title: 'Home',\n        url: 'http://localhost:3000/ServiceCounter'\n      }, {\n        title: 'Service Counter'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"divButtonNextPatient\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button.Default, {\n      className: \"buttonsuccess\",\n      onClick: () => this.consumeQueue(this.handle200, \"nextPatient\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, \"Next Patient\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"divCurrentCitizen\",\n      style: {\n        display: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Text.H3, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 33\n      }\n    }, \"Currently Serving\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(BoxContainer, {\n      title: \"Citizen Information\",\n      collapsible: false,\n      className: \"textleft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2rem\",\n        minWidth: \"1080px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 45\n      }\n    }, \"NRIC\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 45\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 45\n      }\n    }, \"Phone Number\"), /*#__PURE__*/React.createElement(Text.Body, {\n      weight: \"semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 45\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 45\n      }\n    }, this.state.nric), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 45\n      }\n    }, this.state.name), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 45\n      }\n    }, this.state.phone), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 45\n      }\n    }, this.state.email)))), /*#__PURE__*/React.createElement(Text.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 33\n      }\n    }, \"Next service: \"))), /*#__PURE__*/React.createElement(Layout.GridContainer, {\n      className: \"column4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(InputSelect, {\n      placeholder: \"Select\",\n      options: [{\n        value: \"payment\",\n        label: \"Payment\"\n      }, {\n        value: \"pharmacy\",\n        label: \"Pharmacy\"\n      }],\n      valueExtractor: item => item.value,\n      listExtractor: item => item.label,\n      displayValueExtractor: item => item.label,\n      onSelectItem: (item, selectedValue) => {\n        this.setState({\n          inputValue: selectedValue\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spacer1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button.Default, {\n      onClick: () => this.consumeQueue(this.handle200, \"sendtoNextService\", this.state._bookingId, this.state.nric, this.state.name, this.state.email, this.state.phone),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }, \"Send to next service\"))));\n  }\n\n  handle200(response) {\n    console.log('handle200 has received:', response);\n  }\n\n  consumeQueue(callback, buttonSelected, bookingId, nric, citizenName, citizenEmail, citizenNumber) {\n    var respectiveURL = \"\";\n\n    if (buttonSelected == \"nextPatient\") {\n      respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=doctorQueue\";\n    } else {\n      const queueObject = {\n        \"_id\": bookingId,\n        \"nric\": nric,\n        \"citizenName\": citizenName,\n        \"citizenEmail\": citizenEmail,\n        \"citizenNumber\": citizenNumber\n      };\n      var myJSON = encodeURI(JSON.stringify(queueObject));\n      console.log(\"---------------\");\n      console.log(queueObject);\n      respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/sender?bookingID=\" + bookingId + \"&exchangeID=hospital&bindingKey=\" + this.state.inputValue + \"&bookingDetails=\" + myJSON; // respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue\n      // console.log(respectiveURL + \"--------------\")\n    }\n\n    const xhr = new XMLHttpRequest(),\n          method = \"GET\",\n          url = respectiveURL; // initialize a new GET request\n\n    xhr.open(method, url, true); // respond to every readyState change\n\n    xhr.onreadystatechange = () => {\n      // ignore all readyStates other than \"DONE\"\n      if (xhr.readyState !== XMLHttpRequest.DONE) {\n        return;\n      } // call the callback with status\n\n\n      if (xhr.status === 200) {\n        if (buttonSelected == \"nextPatient\") {\n          document.getElementById(\"divCurrentCitizen\").style.display = \"block\";\n          document.getElementById(\"divButtonNextPatient\").style.display = \"none\";\n          this.setState({\n            _bookingId: JSON.parse(xhr.responseText)._id,\n            nric: JSON.parse(xhr.responseText).nric,\n            name: JSON.parse(xhr.responseText).citizenName,\n            phone: JSON.parse(xhr.responseText).citizenNumber,\n            email: JSON.parse(xhr.responseText).citizenEmail\n          });\n        }\n\n        if (buttonSelected == \"sendtoNextService\") {\n          this.setState({\n            showModal: true\n          });\n          document.getElementById(\"divCurrentCitizen\").style.display = \"none\";\n          document.getElementById(\"divButtonNextPatient\").style.display = \"block\";\n        } // console.log(JSON.parse(xhr.responseText));\n\n\n        return callback(xhr.status);\n      } // got something other than 200,\n      // re-initialize and send another GET request\n\n\n      xhr.open(method, url, true);\n      xhr.send();\n    }; // send the initial GET request\n\n\n    xhr.send();\n  }\n\n}\n\nexport default ServiceCounter; // function foundResult(_id: any, nric: any, phone: any, email: any, name: any)  {\n//      queueObject = {\n//         \"_id\" :_id,\n//         \"nric\":nric,\n//         \"citizenName\":name,\n//         \"citizenEmail\":email,\n//         \"citizenNumber\":phone\n//     }\n//     console.log(queueObject)\n// }","map":{"version":3,"sources":["C:/Users/junjie/Documents/GitHub/queue-system/frontend/src/components/ServiceCounter.tsx"],"names":["React","Text","Button","Layout","Breadcrumb","BoxContainer","InputSelect","Modal","styled","ModalContent","StyledSection","Section","ServiceCounter","Component","constructor","props","state","_bookingId","nric","name","phone","email","inputValue","showModal","consumeQueue","bind","render","setState","title","url","handle200","display","padding","minWidth","value","label","item","selectedValue","response","console","log","callback","buttonSelected","bookingId","citizenName","citizenEmail","citizenNumber","respectiveURL","queueObject","myJSON","encodeURI","JSON","stringify","xhr","XMLHttpRequest","method","open","onreadystatechange","readyState","DONE","status","document","getElementById","style","parse","responseText","_id","send"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../App.css';\r\nimport {\r\n    Text,\r\n    Button,\r\n    Layout,\r\n    Breadcrumb,\r\n    BoxContainer,\r\n    InputSelect,\r\n    Modal\r\n} from 'react-lifesg-design-system';\r\nimport styled from \"styled-components\";\r\n\r\nimport { ModalContent } from \"../models/doc-elements\";\r\n\r\n\r\ninterface Props {\r\n    onChange: (fieldName: string, value: string) => void;\r\n    onSave: () => void;\r\n}\r\n\r\nconst StyledSection = styled(Layout.Section)`\r\n    margin-top: 8%;\r\n    min-height: 600px;\r\n`;\r\n\r\ninterface MyState {\r\n    _bookingId : string,\r\n    nric: string,\r\n    name: string,\r\n    phone: string,\r\n    email: string,\r\n    inputValue : string\r\n    showModal: boolean\r\n\r\n}\r\n\r\n\r\n\r\nclass ServiceCounter extends React.Component<{}, MyState> {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            _bookingId: \"\",\r\n            nric: \"\",\r\n            name: \"\",\r\n            phone: \"\",\r\n            email: \"\",\r\n            inputValue: \"\",\r\n            showModal: false\r\n\r\n        };\r\n\r\n        this.consumeQueue = this.consumeQueue.bind(this)\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <StyledSection>\r\n\r\n<Modal.Base\r\n                        show={this.state.showModal}\r\n                        animationFrom=\"bottom\"\r\n                        enableOverlayClick={true}\r\n                    // onOverlayClick={closeModal()}\r\n                    >\r\n                        <Modal.Box onClose={() => {\r\n\r\n                            this.setState({\r\n                                showModal: false\r\n                            });\r\n\r\n\r\n\r\n                        }}>\r\n                            <ModalContent>\r\n                                <span>Send to queue succesfully</span>\r\n                            </ModalContent>\r\n                        </Modal.Box>\r\n                    </Modal.Base>\r\n                <Layout.Container>\r\n                    <Breadcrumb links={[{ title: 'Home', url: 'http://localhost:3000/ServiceCounter' }, { title: 'Service Counter' }]} />\r\n\r\n                    <div id='divButtonNextPatient'>\r\n\r\n\r\n                        <Button.Default className='buttonsuccess'\r\n                            onClick={() => this.consumeQueue(this.handle200, \"nextPatient\")}\r\n                        >Next Patient</Button.Default>\r\n\r\n                    </div>\r\n                    <div id='divCurrentCitizen' style={{ display: 'none' }}>\r\n\r\n                        <Layout.GridContainer className=\"column2\">\r\n                            <div>\r\n\r\n\r\n\r\n\r\n                                <div className='spacer1'></div>\r\n\r\n                                <Text.H3>Currently Serving</Text.H3>\r\n                                <div className='spacer1'></div>\r\n                                <div className='spacer1'></div>\r\n\r\n\r\n                                <BoxContainer title=\"Citizen Information\" collapsible={false} className=\"textleft\" >\r\n                                    <div style={{ padding: \"2rem\", minWidth: \"1080px\" }}>\r\n                                        <Layout.GridContainer className=\"column4\">\r\n                                            <Text.Body weight=\"semibold\">NRIC</Text.Body>\r\n                                            <Text.Body weight=\"semibold\">Name</Text.Body>\r\n                                            <Text.Body weight=\"semibold\">Phone Number</Text.Body>\r\n                                            <Text.Body weight=\"semibold\">Email</Text.Body>\r\n                                            <Text.Body>{this.state.nric}</Text.Body>\r\n                                            <Text.Body>{this.state.name}</Text.Body>\r\n                                            <Text.Body>{this.state.phone}</Text.Body>\r\n                                            <Text.Body>{this.state.email}</Text.Body>\r\n                                        </Layout.GridContainer>\r\n                                    </div>\r\n                                </BoxContainer>\r\n\r\n\r\n                                <Text.Body>Next service: </Text.Body>\r\n\r\n\r\n                            </div>\r\n\r\n                        </Layout.GridContainer>\r\n\r\n\r\n                        <Layout.GridContainer className=\"column4\">\r\n\r\n                            <InputSelect\r\n                                placeholder=\"Select\"\r\n                                options={[\r\n                                    { value: \"payment\", label: \"Payment\" },\r\n                                    { value: \"pharmacy\", label: \"Pharmacy\" }\r\n                                ]}\r\n                                valueExtractor={(item) => item.value}\r\n                                listExtractor={(item) => item.label}\r\n                                displayValueExtractor={(item) => item.label}\r\n                                onSelectItem={(item, selectedValue) => {\r\n\r\n                                    this.setState({\r\n                                        inputValue : selectedValue\r\n                                    })\r\n                                }} \r\n                            />\r\n                        </Layout.GridContainer>\r\n\r\n\r\n                        <div className='spacer1'></div>\r\n\r\n\r\n                        <Button.Default\r\n                            onClick={() => this.consumeQueue(this.handle200, \"sendtoNextService\", this.state._bookingId, this.state.nric, this.state.name, this.state.email, this.state.phone)}\r\n                            \r\n                        >Send to next service</Button.Default>\r\n\r\n                    </div>\r\n\r\n                </Layout.Container>\r\n            </StyledSection>\r\n        )\r\n    }\r\n\r\n\r\n     handle200(response) {\r\n        console.log('handle200 has received:', response);\r\n    }\r\n\r\n    \r\n    \r\n     consumeQueue(callback, buttonSelected: string, bookingId?: string, nric?: string, citizenName?: string, citizenEmail?: string, citizenNumber?: string) {\r\n    \r\n        var respectiveURL = \"\"\r\n        if (buttonSelected == \"nextPatient\") {\r\n            \r\n            respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=doctorQueue\"\r\n\r\n        }\r\n        else {\r\n    \r\n            const queueObject = {\r\n                \"_id\" :bookingId,\r\n                \"nric\": nric,\r\n                \"citizenName\": citizenName,\r\n                \"citizenEmail\": citizenEmail,\r\n                \"citizenNumber\": citizenNumber\r\n            }\r\n    \r\n            var myJSON = encodeURI(JSON.stringify(queueObject));\r\n\r\n            console.log(\"---------------\")\r\n            console.log(queueObject)\r\n\r\n            respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/sender?bookingID=\" + bookingId + \"&exchangeID=hospital&bindingKey=\" + this.state.inputValue+\"&bookingDetails=\" + myJSON;\r\n            // respectiveURL = \"https://hyxfimzf9g.execute-api.us-east-1.amazonaws.com/default/receiver?queueName=\" + this.state.inputValue\r\n            // console.log(respectiveURL + \"--------------\")\r\n        }\r\n    \r\n    \r\n    \r\n        const xhr = new XMLHttpRequest(),\r\n            method = \"GET\",\r\n            url = respectiveURL;\r\n        // initialize a new GET request\r\n        xhr.open(method, url, true);\r\n    \r\n        // respond to every readyState change\r\n        xhr.onreadystatechange = () => {\r\n    \r\n            // ignore all readyStates other than \"DONE\"\r\n            if (xhr.readyState !== XMLHttpRequest.DONE) { return; }\r\n    \r\n            // call the callback with status\r\n            if (xhr.status === 200) {\r\n                if (buttonSelected == \"nextPatient\") {\r\n                    document.getElementById(\"divCurrentCitizen\")!!.style.display = \"block\";\r\n                    document.getElementById(\"divButtonNextPatient\")!!.style.display = \"none\";\r\n                    this.setState({\r\n                        _bookingId : JSON.parse(xhr.responseText)._id,\r\n                        nric:  JSON.parse(xhr.responseText).nric,\r\n                        name: JSON.parse(xhr.responseText).citizenName,\r\n                        phone: JSON.parse(xhr.responseText).citizenNumber,\r\n                        email: JSON.parse(xhr.responseText).citizenEmail\r\n\r\n                    })\r\n                    \r\n                }\r\n                \r\n                if(buttonSelected == \"sendtoNextService\"){\r\n                    this.setState({\r\n                        showModal: true\r\n                    });\r\n\r\n                    document.getElementById(\"divCurrentCitizen\")!!.style.display = \"none\";\r\n                    document.getElementById(\"divButtonNextPatient\")!!.style.display = \"block\";\r\n                }\r\n\r\n                // console.log(JSON.parse(xhr.responseText));\r\n                \r\n                return callback(xhr.status);\r\n            }\r\n    \r\n            // got something other than 200,\r\n            // re-initialize and send another GET request\r\n            xhr.open(method, url, true);\r\n            xhr.send();\r\n        }\r\n    \r\n        // send the initial GET request\r\n        xhr.send();\r\n    } \r\n\r\n\r\n}\r\n\r\nexport default ServiceCounter;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// function foundResult(_id: any, nric: any, phone: any, email: any, name: any)  {\r\n//      queueObject = {\r\n//         \"_id\" :_id,\r\n//         \"nric\":nric,\r\n//         \"citizenName\":name,\r\n//         \"citizenEmail\":email,\r\n//         \"citizenNumber\":phone\r\n//     }\r\n\r\n//     console.log(queueObject)\r\n// }\r\n\r\n"]},"metadata":{},"sourceType":"module"}